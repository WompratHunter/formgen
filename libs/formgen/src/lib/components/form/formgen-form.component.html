@if (config && form) {
  <mat-card class="formgen-card">
    <mat-card-header>
      <mat-card-title>{{ config.name }}</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>

        <div class="formgen-fields-grid" [ngStyle]="gridContainerStyles">
          @for (field of sortedFields; track field.key) {
            <div
              class="formgen-field-wrapper {{ field.css_class }} formgen-type--{{ field.type }}"
              [ngStyle]="fieldStyles(field)"
            >
              <ng-container
                [ngComponentOutlet]="fieldFactory.resolve(field.type)"
                [ngComponentOutletInputs]="fieldInputs(field)"
              />
            </div>
          }
        </div>

        <div class="formgen-actions">
          @for (action of config.actions; track action.type) {
            @if (action.type === 'submit') {
              <button
                mat-raised-button
                [color]="action.color"
                type="submit"
                [class]="action.css_class"
              >{{ action.label }}</button>
            } @else if (action.type === 'reset') {
              <button
                mat-stroked-button
                type="button"
                [class]="action.css_class"
                (click)="onReset()"
              >{{ action.label }}</button>
            } @else {
              <button
                mat-button
                type="button"
                [color]="action.color"
                [class]="action.css_class"
              >{{ action.label }}</button>
            }
          }
        </div>

      </form>
    </mat-card-content>
  </mat-card>
}
