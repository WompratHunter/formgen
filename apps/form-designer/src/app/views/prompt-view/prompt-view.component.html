<div class="prompt-container">
  <mat-card class="prompt-card" [attr.aria-busy]="loading() ? true : null">
    <mat-card-header>
      <mat-card-title>Generate a Form</mat-card-title>
      <mat-card-subtitle>Describe the form you need in plain English</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <mat-form-field appearance="outline" class="prompt-field">
        <mat-label>Form description</mat-label>
        <textarea
          matInput
          [(ngModel)]="prompt"
          rows="5"
          placeholder="e.g. A contact form with name, email, subject dropdown, and message textarea"
          [disabled]="loading()"
          aria-describedby="prompt-hint"
        ></textarea>
        <mat-hint id="prompt-hint">Be specific — mention field types, required fields, and layout preferences.</mat-hint>
        <mat-hint align="end" class="char-count">{{ prompt.length }}/2000</mat-hint>
      </mat-form-field>
    </mat-card-content>

    <mat-card-actions align="end">
      <button
        mat-flat-button
        [disabled]="!prompt.trim() || loading()"
        (click)="submit()"
        aria-label="Generate form from description"
        class="submit-btn"
      >
        @if (loading()) {
          <span class="btn-content">
            <mat-spinner diameter="18" aria-hidden="true" />
            Generating…
          </span>
        } @else {
          Generate Form
        }
      </button>
    </mat-card-actions>
  </mat-card>
</div>
