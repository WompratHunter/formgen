<div class="browser-header">
  <h2 class="browser-title">Form Catalog</h2>
  <mat-form-field appearance="outline" class="search-field" subscriptSizing="dynamic">
    <mat-label>Search</mat-label>
    <mat-icon matPrefix aria-hidden="true">search</mat-icon>
    <input #searchInput matInput [value]="searchQuery()" (input)="searchQuery.set($any($event.target).value)" aria-label="Search forms" />
  </mat-form-field>
</div>

@if (loading()) {
  <div class="browser-loading" aria-live="polite"><mat-spinner diameter="32" aria-label="Loading catalog" /></div>
} @else if (!filteredEntries().length) {
  <p class="browser-empty">No forms found.</p>
} @else {
  <mat-nav-list>
    @for (entry of filteredEntries(); track entry.id) {
      <mat-list-item
        [class.selected]="selectedId() === entry.id"
        (click)="select(entry)"
        [matTooltip]="entry.description || ''"
        matTooltipPosition="right"
        [matTooltipDisabled]="!entry.description"
      >
        <span matListItemTitle>{{ entry.name }}</span>
        <span matListItemLine class="entry-date">{{ formatDate(entry.published_at) }}</span>
        @if (entry.description) {
          <span matListItemLine class="entry-desc">{{ entry.description }}</span>
        }
      </mat-list-item>
    }
  </mat-nav-list>
}
